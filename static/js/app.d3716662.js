(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(t,e,a){t.exports=a("56d7")},"44fd":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e792");var i=a("2b0e"),n=a("b970"),c=(a("157a"),a("7371"),a("44fd"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("van-field",{attrs:{placeholder:"jsapi_ticket"},model:{value:t.jsapi_ticket,callback:function(e){t.jsapi_ticket=e},expression:"jsapi_ticket"}}),a("van-button",{on:{click:t.getData}},[t._v("重置")]),a("WxUploaderImage")],1)}),o=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"van-uploader"},[a("div",{staticClass:"van-uploader__wrapper"},[a("div",{staticClass:"van-uploader__input-wrapper"},[a("div",{staticClass:"van-uploader__upload",on:{click:t.chooseImage}},[a("i",{staticClass:"van-icon van-icon-photograph van-uploader__upload-icon"})])]),t._l(t.fileList,(function(e,i){return a("div",{staticClass:"van-uploader__preview",on:{click:function(e){return t.previewImage(i)}}},[a("div",{staticClass:"van-image van-uploader__preview-image"},[a("img",{staticClass:"van-image__img",staticStyle:{"object-fit":"cover"},attrs:{src:e.url}})]),a("div",{staticClass:"van-uploader__preview-delete",on:{click:function(e){return e.stopPropagation(),t.deleteImage(i)}}},[a("i",{staticClass:"van-icon van-icon-cross van-uploader__preview-delete-icon"})])])}))],2)])},r=[],l=a("28a2"),u={data:function(){return{fileList:[]}},methods:{previewImage:function(t){Object(l["a"])({images:this.fileList.map((function(t){return t.url})),startPosition:t})},deleteImage:function(t){this.fileList.splice(t,1)},chooseImage:function(){var t=this;wx.ready((function(){t.chooseImageWX((function(e){e.forEach((function(e){wx.getLocalImgData({localId:e,success:function(a){var i=a.localData;-1===i.indexOf("http://")&&-1===i.indexOf("data:image")&&(i="data:image/png;base64,"+i),t.fileList.push({url:i,localId:e})}})}))}),t.uploadImage)}))},uploadImage:function(t,e){},chooseImageWX:function(t,e){wx.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var a=e.localIds;t&&t(a)}})},uploadImageToWX:function(t){var e=this,a=this.fileList.length-1,i=[];new Promise((function(t){e.fileList.forEach((function(e,n){var c=e.localId;wx.uploadImage({localId:c,isShowProgressTips:1,success:function(e){var c=e.serverId;i.push(c),n===a&&t(i)}})}))})).then((function(e){t&&t(e)}))}}},p=u,d=(a("59ce"),a("2877")),f=Object(d["a"])(p,s,r,!1,null,"02db62d7",null),m=f.exports,g=a("bc3a"),v=a.n(g),_=a("6199"),h=a.n(_),w={name:"App",components:{WxUploaderImage:m},data:function(){return{jsapi_ticket:""}},mounted:function(){this.getData()},methods:{getData:function(){this.jsapi_ticket&&(window.jsapi_ticket=this.jsapi_ticket);var t="wx081e9eb71dfc60f5",e="f4bb38be8b8724672227c659c7b65f25",a=(new Date).getTime();new Promise((function(i){if(window.jsapi_ticket)i(window.jsapi_ticket);else{var n=localStorage.getItem("timestamp"),c=localStorage.getItem("jsapi_ticket")||"";!c||"undefined"===c||!n||a-n>7e6?v.a.get("/wxapi/cgi-bin/token?grant_type=client_credential&appid="+t+"&secret="+e).then((function(t){var e=t.data;v.a.get("/wxapi/cgi-bin/ticket/getticket?access_token="+e.access_token+"&type=jsapi").then((function(t){var e=t.data;localStorage.setItem("jsapi_ticket",e.ticket),localStorage.setItem("timestamp",a),i(e.ticket)}))})):i(c)}})).then((function(e){var i=a.toString().slice(0,10),n="Wm3WZYTPz0wzccnW",c=location.href.split("#")[0],o="jsapi_ticket=".concat(e,"&noncestr=").concat(n,"&timestamp=").concat(i,"&url=").concat(c),s=h()(o);wx.config({debug:!1,appId:t,timestamp:i,nonceStr:n,signature:s,jsApiList:["chooseImage","uploadImage","getLocalImgData","ready"]})}))}}},I=w,k=Object(d["a"])(I,c,o,!1,null,null,null),b=k.exports;i["a"].use(n["a"]),new i["a"]({el:"#app",render:function(t){return t(b)}})},"59ce":function(t,e,a){"use strict";var i=a("679a1"),n=a.n(i);n.a},"679a1":function(t,e,a){},7371:function(t,e,a){}},[[0,"runtime","chunk-vant","chunk-libs"]]]);